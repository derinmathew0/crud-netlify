{"version":3,"sources":["app/ProductCard.js","app/ProductsList.js","app/actions/productActions.js","app/ProductsPage.js","app/actions/action-types/product-actions.js","app/ProductForm.js","app/ProductFormPage.js","App.js","rootReducer.js","app/reducers/productsReducer.js","index.js"],"names":["ProductCard","product","deleteProduct","className","src","cover","alt","title","to","_id","onClick","ProductsList","products","useState","allProducts","setProducts","useEffect","createArray","emptyMessage","productsList","map","key","timeout","type","onChange","evt","searchText","target","value","toLowerCase","clearTimeout","setTimeout","newProducts","filter","index","indexOf","doSearch","placeholder","length","handleResponse","response","ok","json","error","Error","statusText","ProductsPage","this","props","fetchProducts","React","Component","connect","state","dispatch","fetch","then","res","data","id","method","headers","productId","ProductForm","errors","loading","componentWillReceiveProps","nextProps","setState","handleChange","e","name","Object","assign","isValidImageURL","url","RegExp","test","match","handleSubmit","preventDefault","isValidUrl","keys","saveProduct","catch","err","form","classnames","onSubmit","global","htmlFor","ProductFormPage","redirect","componentDidMount","params","fetchProduct","updateProduct","find","item","body","JSON","stringify","ActiveLink","label","activeOnlyWhenExact","path","exact","children","App","component","combineReducers","action","findIndex","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7b2ba844.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types'; \n\nexport default function ProductCard({ product, deleteProduct }) {\n  return (\n    <div className=\"ui card\">\n      <div className=\"image\">\n        <img src={product.cover} alt={product.title} />\n      </div>\n      <div className=\"content\">\n        <div className=\"header\">{product.title}</div>\n      </div>\n      <div className=\"extra content\">\n        <div className=\"ui two buttons\">\n          <Link to={`/product/${product._id}`} className=\"ui basic button green\">Edit</Link>\n          <div className=\"ui basic button red\" onClick={() => deleteProduct(product._id)}>Delete</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nProductCard.propTypes = {\n  product: PropTypes.object.isRequired,\n  deleteProduct: PropTypes.func.isRequired\n}","import React, { useState, useEffect } from 'react';\nimport ProductCard from './ProductCard';\nimport PropTypes from 'prop-types';\n\nexport default function ProductsList({ products, deleteProduct }) {\n\n  const [allProducts, setProducts] = useState([]);\n\n  useEffect(() => {\n    createArray();\n  }, [products]);\n\n  const createArray = () => {\n\n    setProducts([...products]);\n  };\n\n  const emptyMessage = (\n    <p>There are no products yet in your collection.</p>\n  );\n\n  const productsList = (\n\n    <div className=\"ui four cards\">\n      {allProducts.map(product => <ProductCard product={product} key={product._id} deleteProduct={deleteProduct} />)}\n    </div>\n  );\n\n  var timeout = 0;\n\n  function doSearch(evt) {\n    var searchText = evt.target.value.toLowerCase();; // this is the search text\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      let currentProducts = [...products]\n      let newProducts = currentProducts.filter((product, index) => {\n        let productName = product.title.toLowerCase();\n        return productName.indexOf(searchText) >= 0;\n      });\n\n      setProducts(newProducts);\n    }, 300);\n\n\n  }\n\n  return (\n    <div>\n\n\n      <input\n        type=\"test\"\n\n        onChange={evt => doSearch(evt)}\n        placeholder={'Search product'} className=\"product-search\" />\n\n      {products.length === 0 ? emptyMessage : productsList}\n    </div>\n  );\n}\n\nProductsList.propTypes = {\n  products: PropTypes.array.isRequired,\n  deleteProduct: PropTypes.func.isRequired\n}\n","\nimport { SET_PRODUCTS,ADD_PRODUCT,PRODUCT_FETCHED,PRODUCT_UPDATED,PRODUCT_DELETED} from './action-types/product-actions'\n\nfunction handleResponse(response) {\n  if (response.ok) {\n    return response.json();\n  } else {\n    let error = new Error(response.statusText);\n    error.response = response;\n    throw error;\n  }\n}\n\nexport function setProducts(products) {\n  return {\n    type: SET_PRODUCTS,\n    products\n  }\n}\n\nexport function addProduct(product) {\n  return {\n    type: ADD_PRODUCT,\n    product\n  }\n}\n\nexport function productFetched(product) {\n  return {\n    type: PRODUCT_FETCHED,\n    product\n  }\n}\n\nexport function productUpdated(product) {\n  return {\n    type: PRODUCT_UPDATED,\n    product\n  }\n}\n\nexport function productDeleted(productId) {\n  return {\n    type: PRODUCT_DELETED,\n    productId\n  }\n}\n\nexport function saveProduct(data) {\n  return dispatch => {\n    return fetch('/api/products', {\n      method: 'post',\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(handleResponse)\n    .then(data => dispatch(addProduct(data.product)));\n  }\n}\n\nexport function updateProduct(data) {\n  return dispatch => {\n    return fetch(`/api/products/${data._id}`, {\n      method: 'put',\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(handleResponse)\n    .then(data => dispatch(productUpdated(data.product)));\n  }\n}\n\nexport function deleteProduct(id) {\n  return dispatch => {\n    return fetch(`/api/products/${id}`, {\n      method: 'delete',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(handleResponse)\n    .then(data => dispatch(productDeleted(id)));\n  }\n}\n\nexport function fetchProducts() {\n  return dispatch => {\n    fetch('/api/products')\n      .then(res => res.json())\n      .then(data => dispatch(setProducts(data.products)));\n  }\n}\n\nexport function fetchProduct(id) {\n  return dispatch => {\n    fetch(`/api/products/${id}`)\n      .then(res => res.json())\n      .then(data => dispatch(productFetched(data.product)));\n  }\n}\n","import React from 'react';\nimport ProductsList from './ProductsList';\nimport { connect } from 'react-redux';\nimport { fetchProducts, deleteProduct } from './actions/productActions';\nimport PropTypes from 'prop-types'; \n\nclass ProductsPage extends React.Component {\n  componentDidMount() {\n    this.props.fetchProducts();\n  }\n\n  render() {\n    return (\n      <div>\n        <h1>Products List</h1>\n\n        <ProductsList products={this.props.products} deleteProduct={this.props.deleteProduct} />\n      </div>\n    );\n  }\n}\n\nProductsPage.propTypes = {\n  products: PropTypes.array.isRequired,\n  fetchProducts: PropTypes.func.isRequired,\n  deleteProduct: PropTypes.func.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    products: state.products\n  }\n}\n\nexport default connect(mapStateToProps, { fetchProducts, deleteProduct })(ProductsPage);\n","\r\n//Types should be in const to avoid typos and duplication since it's a string and could be easily miss spelled\r\nexport const SET_PRODUCTS = 'SET_PRODUCTS';\r\nexport const ADD_PRODUCT = 'ADD_PRODUCT';\r\nexport const PRODUCT_FETCHED = 'PRODUCT_FETCHED';\r\nexport const PRODUCT_UPDATED = 'PRODUCT_UPDATED';\r\nexport const PRODUCT_DELETED = 'PRODUCT_DELETED';\r\n\r\n","import React from 'react';\nimport classnames from 'classnames';\n\nclass ProductForm extends React.Component {\n  state = {\n    _id: this.props.product ? this.props.product._id : null,\n    title: this.props.product ? this.props.product.title : '',\n    cover: this.props.product ? this.props.product.cover : '',\n    errors: {},\n    loading: false\n  }\n\n  componentWillReceiveProps = (nextProps) => {\n    this.setState({\n      _id: nextProps.product._id,\n      title: nextProps.product.title,\n      cover: nextProps.product.cover\n    });\n  }\n\n  handleChange = (e) => {\n    if (!!this.state.errors[e.target.name]) {\n      let errors = Object.assign({}, this.state.errors);\n      delete errors[e.target.name];\n      this.setState({\n        [e.target.name]: e.target.value,\n        errors\n      });\n    }\n     else {\n      this.setState({ [e.target.name]: e.target.value });\n    }\n  }\n  isValidImageURL=(url) =>{\n    var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n    '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\n    '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n    '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n    '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n    '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n  return !!pattern.test(url) && url.match(/\\.(jpeg|jpg|gif|png)$/) != null;\n    //return(url.match(/\\.(jpeg|jpg|gif|png)$/) != null);\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // validation\n    let errors = {};\n    let isValidUrl=this.isValidImageURL(this.state.cover);\n    \n    if (this.state.title === '') errors.title = \"This field is required\";\n    if (!isValidUrl) errors.cover = \"Invalid Image Url\";\n    this.setState({ errors });\n    const isValid = Object.keys(errors).length === 0\n\n    if (isValid) {\n      const { _id, title, cover } = this.state;\n      this.setState({ loading: true });\n      this.props.saveProduct({ _id, title, cover })\n        .catch((err) => err.response.json().then(({errors}) => this.setState({ errors, loading: false })));\n    }\n  }\n\n  render() {\n    const form = (\n      <form className={classnames('ui', 'form', { loading: this.state.loading })} onSubmit={this.handleSubmit}>\n        <h1>Add new product</h1>\n\n        {!!this.state.errors.global && <div className=\"ui negative message\"><p>{this.state.errors.global}</p></div>}\n\n        <div className={classnames('field', { error: !!this.state.errors.title})}>\n          <label htmlFor=\"title\">Title</label>\n          <input\n            name=\"title\"\n            value={this.state.title}\n            onChange={this.handleChange}\n            id=\"title\"\n          />\n          <span>{this.state.errors.title}</span>\n        </div>\n\n        <div className={classnames('field', { error: !!this.state.errors.cover})}>\n          <label htmlFor=\"cover\">Product Image URL</label>\n          <input\n            name=\"cover\"\n            value={this.state.cover}\n            onChange={this.handleChange}\n            id=\"cover\"\n          />\n          <span>{this.state.errors.cover}</span>\n        </div>\n\n        <div className=\"field\">\n          {this.state.cover !== '' && <img src={this.state.cover} alt={this.state.title} className=\"ui small bordered image\"/>}\n        </div>\n\n        <div className=\"field\">\n          <button className=\"ui primary button\">Save</button>\n        </div>\n      </form>\n    );\n    return (\n      <div>\n        { form }\n      </div>\n    );\n  }\n}\n\n\nexport default ProductForm;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { saveProduct, fetchProduct, updateProduct } from './actions/productActions';\nimport ProductForm from './ProductForm';\n\nclass ProductFormPage extends React.Component {\n\n  state = {\n    redirect: false\n  }\n\n  componentDidMount = () => {\n    const { match } = this.props;\n    if (match.params._id) {\n      this.props.fetchProduct(match.params._id);\n    }\n  }\n\n  saveProduct = ({_id, title, cover }) => {\n    if (_id) {\n      return this.props.updateProduct({ _id, title, cover }).then(\n        () => { this.setState({ redirect: true })},\n      );\n    } else {\n      return this.props.saveProduct({ title, cover }).then(\n        () => { this.setState({ redirect: true })},\n      );\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {\n          this.state.redirect ?\n          <Redirect to=\"/products\" /> :\n          <ProductForm\n            product={this.props.product}\n            saveProduct={this.saveProduct}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state, props) {\n  const { match } = props;\n  if (match.params._id) {\n    return {\n      product: state.products.find(item => item._id === match.params._id)\n    }\n  }\n\n  return { product: null };\n}\n\nexport default connect(mapStateToProps, { saveProduct, fetchProduct, updateProduct })(ProductFormPage);\n","import React, { Component } from 'react';\nimport { Link, Route } from 'react-router-dom';\nimport ProductsPage from './app/ProductsPage';\nimport ProductFormPage from './app/ProductFormPage';\nimport './App.css';\n\nconst ActiveLink = ({ label, to, activeOnlyWhenExact }) => (\n  <Route path={to} exact={activeOnlyWhenExact} children={({ match }) => (\n    <Link className={match ? 'active item' : 'item'} to={to}>{label}</Link>\n  )} />\n);\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"ui container\">\n        \n        <div className=\"ui three item menu\">\n          <ActiveLink activeOnlyWhenExact to=\"/\" label=\"Home\" />\n          <ActiveLink activeOnlyWhenExact to=\"/products\" label=\"Products\" />\n          <ActiveLink activeOnlyWhenExact to=\"/products/new\" label=\"Add New Product\" />\n        </div>\n\n        <Route exact path=\"/products\" component={ProductsPage} />\n        <Route path=\"/products/new\" component={ProductFormPage} />\n        <Route path=\"/product/:_id\" component={ProductFormPage} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\n\nimport products from './app/reducers/productsReducer';\n\nexport default combineReducers({\n  products\n});\n","import { SET_PRODUCTS, ADD_PRODUCT, PRODUCT_FETCHED, PRODUCT_UPDATED, PRODUCT_DELETED } from '../actions/action-types/product-actions';\n\nexport default function productsReducer(state = [], action = {}) {\n  switch(action.type) {\n    case ADD_PRODUCT:\n      return [\n        ...state,\n        action.product\n      ];\n\n    case PRODUCT_DELETED:\n      return state.filter(item => item._id !== action.productId);\n\n    case PRODUCT_UPDATED:\n      return state.map(item => {\n        if (item._id === action.product._id) return action.product;\n        return item;\n      });\n\n    case PRODUCT_FETCHED:\n      const index = state.findIndex(item => item._id === action.product._id);\n      if (index > -1) {\n        return state.map(item => {\n          if (item._id === action.product._id) return action.product;\n          return item;\n        });\n      } else {\n        return [\n          ...state,\n          action.product\n        ];\n      }\n\n    case SET_PRODUCTS:\n      return action.products;\n    default: return state;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './rootReducer';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(\n    applyMiddleware(thunk)\n  )\n);\n\nReactDOM.render(\n  <BrowserRouter>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </BrowserRouter>,\n  \n  document.getElementById('root')\n);\n"],"sourceRoot":""}